var skuSelector=function(){var config={elements:{classes:{skuContainer:".seletor-sku"}},sellerId:"1",qtButton:{minusLimit:0,moreLimit:1e3},quotationOnly:!1,footerDiv:{version:"2",redirectTo:"/checkout/#/cart"},totalPrice:!0,showNotifyMe:!1},popCart='<div id="popCart" style="display:none">\t\t\t\t\t\t<div class="popCartMessage">Hemos enviado los productos seleccionados al carro de compras donde podrar comprar o cotizar.<span class="closePopCart"><a href="#">X</a></span></div>\t\t\t\t\t\t<div class="btns">\t\t\t\t\t\t\t<span class="continueshopping"><a href="#">Seguir comprando</a></span>\t\t\t\t\t\t\t<span class="quoting"><a href="/cotizacion">Cotizar</a></span>\t\t\t\t\t\t\t<span class="goCart"><a href="/checkout/#/cart">Ir al carro <i class="fa fa-cart-plus" aria-hidden="true"></i></a></span>\t\t\t\t\t\t</div>\t\t\t\t\t</div>\t\t\t\t\t',footerDivV1='<div class="footerSku"><div class="first"><div class="totalMsg" style="display:none">Total</div><p class="msg">Seleccione productos</p></div><div class="second"><a class="addItensToCart">Cotizar o Comprar</a></div>',footerDivV2='<div class="footerSku"><div class="first"><div class="totalMsg" style="display:none">Total</div><p class="msg">Seleccione productos</p></div><div class="second"><a class="cartButton">Comprar <i class="fa fa-cart-plus" aria-hidden="true"></i></a><a class="quotationButton">Cotizar este producto</a></div></div>',_createCheckboxWithId=function(id){return'<div class="skuCheck"><input type="checkbox" class="qtCheckbox cb_'+id+'" id="cb_'+id+'" name="skuSelector" value="'+id+'"><label for="cb_'+id+'"></label></div>'},_createInputWithId=function(id){return'<div class="qtde"><div class="qtButtons qt_'+id+'"> <a class="minus" style="display:block">-</a><input type="number" class="qtdeInput" value="0"> <a class="more" style="display:block">+</a> </div></div>'},_transformPrice=function(value,format){if(!value)return"";var text="";switch(format){case"colon":text=value.substr(value.indexOf(":")+1,value.length);break;case"comma":text=value.substr(0,value.indexOf(","))}return text},_createUI=function(){switch($("#buyButton").hide(),config.footerDiv.version){case"1":$(footerDivV1).insertAfter(config.elements.classes.skuContainer),config.quotationOnly&&$(".addItensToCart").html("Cotizar");break;case"2":$(footerDivV2).insertAfter(config.elements.classes.skuContainer)}config.quotationOnly||$("body").append(popCart),$(config.elements.classes.skuContainer+" .skuList").each(function(){if($(this)&&0!=$(".preco",this).length&&0!=$(".buy-button",this).length){$(".buy-button",this).hide();var sku=$(".buy-button",this).attr("href").match("sku=[^&]*").toString(),id=sku.substr(sku.indexOf("=")+1);$(this).addClass("sku_"+id);var skuHtml='<div class="skuNumber_'+id+'"></div>';$(skuHtml).insertAfter($(".nomeSku",this)),skuHtml='<div class="skuStock_'+id+'"></div>',$(skuHtml).insertAfter($(".nomeSku",this)),$(_createCheckboxWithId(id)).insertBefore($(".imageSku",this)),$(_createInputWithId(id)).insertAfter($(".preco",this)),$(".preco",this).addClass("pr_"+id),$(".pr_"+id+" em.valor-por").html(_transformPrice($(".pr_"+id+" em.valor-por").html(),"colon")),$(".pr_"+id+" em.valor-de").html(_transformPrice($(".pr_"+id+" em.valor-de").html(),"colon")),$(".pr_"+id+" em.valor-por strong").html(_transformPrice($(".pr_"+id+" em.valor-por strong").html(),"comma")),$(".pr_"+id+" em.valor-de strong").html(_transformPrice($(".pr_"+id+" em.valor-de strong").html(),"comma"))}else if(config.showNotifyMe){$('<span>Este producto no estÃ¡ disponible, <a class="showNotifyMe">dÃ©janos tu correo</a> y entÃ©rate sobre disponibilidad.</span>').insertAfter($(".nomeSku",this))}else $(this).hide()})},_addToCart=function(){var orderItems=[];$(config.elements.classes.skuContainer+" .skuList").each(function(){if($(this)&&0!=$(".preco",this).length&&$(".skuCheck .qtCheckbox",this).is(":checked")){var qtde,sku=_getIdentifier($(".skuCheck .qtCheckbox",this).attr("class").split(/\s+/),"cb_");qtde=$(".qt_"+sku).children(".qtdeInput").val(),orderItems.push({id:sku,quantity:qtde})}}),_makeCartRequest(orderItems)},_makeCartRequest=function(orderItems){if(orderItems.length>0){$("#ajaxBusy").show();for(var newAdd="/checkout/cart/add?",i=0;i<orderItems.length;i++)newAdd=newAdd+"sku="+orderItems[i].id+"&qty="+orderItems[i].quantity+"&seller="+config.sellerId+"&redirect=true&";newAdd+=window.location.search.replace("?",""),$.ajax({type:"GET",url:newAdd,contentType:"application/json; charset=utf-8",dataType:"json",processData:!1,crossDomain:!0,async:!0,error:function(xhr,ajaxOptions,thrownError){var error_message="";switch(xhr.status){case 404:error_message="404 - A pÃƒÂ¡gina da requisiÃƒÂ§ÃƒÂ£o nÃƒÂ£o foi encontrada.";break;case 403:error_message='403 - A pÃƒÂ¡gina da requisiÃƒÂ§ÃƒÂ£o nÃƒÂ£o foi encontrada e o retorno foi "Acesso negado"';break;case 500:error_message="500 - Houve um erro interno no servidor."}switch(console.log(error_message),config.footerDiv.version){case"1":config.quotationOnly?window.location.href="/cotizacion":$("#popCart").fadeIn(400);break;case"2":window.location.href=config.footerDiv.redirectTo}}})}else alert("Ningun producto disponible para ser agregado al carro. \n Por favor verifique si existe disponibilidad de productos.")},_getProductoData=function(){var skuRequestUrl="https://nibsa.vtexcommercestable.com.br/api/catalog_system/pub/products/search?fq=productId:"+$("#___rc-p-id").val();$.get(skuRequestUrl,function(data){$(data[0].items).each(function(){this.referenceId[0]&&$(".skuNumber_"+this.itemId).html(this.referenceId[0].Value)})})},_getProductWithVar=function(){var skuId=$("#___rc-p-id").val();vtexjs.catalog.getProductWithVariations(skuId).done(function(product){product.skus.length&&$(product.skus).each(function(){var avQty=this.availablequantity;"99999"==avQty&&(avQty="+15"),$(".skuStock_"+this.sku).append("<span> Stock: </span>"+avQty)})})},_qtButtonPressed=function(button,type){var quantityInput=$(button).siblings(".qtdeInput"),factor=0;switch(type){case"minus":factor=-1;break;case"more":factor=1}var newQuantity=parseInt(quantityInput.val())+factor,identifier=_getIdentifier($(button).parent().attr("class").split(/\s+/),"qt_");newQuantity==config.qtButton.minusLimit?$(".cb_"+identifier).is(":checked")&&$(".cb_"+identifier).prop("checked",!1):newQuantity>config.qtButton.minusLimit&&($(".cb_"+identifier).is(":checked")||$(".cb_"+identifier).prop("checked",!0)),newQuantity>=config.qtButton.minusLimit&&newQuantity<=config.qtButton.moreLimit&&(quantityInput.val(newQuantity),_updateQuantity())},_qtCheckboxPressed=function(button){var identifier=_getIdentifier($(button).attr("class").split(/\s+/),"cb_"),quantityInput=$(".qt_"+identifier).children(".qtdeInput");$(button).is(":checked")?quantityInput.val(config.qtButton.minusLimit+1):quantityInput.val(config.qtButton.minusLimit),_updateQuantity()},_qtInputModified=function(input){$(input).val()<config.qtButton.minusLimit?$(input).val(config.qtButton.minusLimit):$(input).val()>config.qtButton.moreLimit&&$(input).val(config.qtButton.moreLimit);var identifier=_getIdentifier($(input).parent().attr("class").split(/\s+/),"qt_");$(input).val()>config.qtButton.minusLimit?$(".cb_"+identifier).prop("checked",!0):$(".cb_"+identifier).prop("checked",!1),_updateQuantity()},_getIdentifier=function(classArray,type){var identifier;return $(classArray).each(function(index,value){value.substr(0,3)==type&&(identifier=value.substr(value.indexOf("_")+1,value.length))}),identifier},_floatToCurrency=function(number){for(var numberToArray=number.toString().split("").reverse(),numberConverted=[],i=numberToArray.length;i>=0;i--)0!=i&&i%3==0&&i!=numberToArray.length?numberConverted.push(numberToArray[i]+"."):numberConverted.push(numberToArray[i]);return numberConverted.join("")},_updateQuantity=function(){var checkOutTotal=0;$(".qtdeInput").each(function(){if($(this).val()>=0)if(config.totalPrice){var identifier=_getIdentifier($(this).parent().attr("class").split(/\s+/),"qt_"),precioUnitario=$(".pr_"+identifier+" em.valor-por strong").text().replace("$ ","").replace(".","");checkOutTotal+=parseInt($(this).val())*precioUnitario}else checkOutTotal+=parseInt($(this).val())}),0==checkOutTotal?($(".footerSku .msg").text("Seleccione productos"),$(".totalMsg").hide()):(config.totalPrice?$(".footerSku .msg").text("$"+_floatToCurrency(checkOutTotal)):$(".footerSku .msg").text(checkOutTotal),$(".totalMsg").show())},_bindUIActions=function(){switch(config.quotationOnly||($(".continueshopping a").bind("click",function(e){e.preventDefault(),location.reload()}),$(".closePopCart a").bind("click",function(e){e.preventDefault(),$("#popCart").fadeOut(200)})),config.footerDiv.version){case"1":$(".footerSku .addItensToCart").bind("click",function(e){e.preventDefault(),_addToCart()});break;case"2":$(".footerSku .cartButton").bind("click",function(e){e.preventDefault(),config.footerDiv.redirectTo="/checkout/#/cart",_addToCart()}),$(".footerSku .quotationButton").bind("click",function(e){e.preventDefault(),config.footerDiv.redirectTo="/cotizacion",_addToCart()})}$(".qtButtons .minus").bind("click",function(){_qtButtonPressed($(this),"minus")}),$(".qtButtons .more").bind("click",function(){_qtButtonPressed($(this),"more")}),$(".qtCheckbox").bind("click",function(){_qtCheckboxPressed($(this))}),$(".qtdeInput").on("input",function(){_qtInputModified($(this))}),config.showNotifyMe&&$(".showNotifyMe").bind("click",function(){$(this).parent().fadeOut("fast",function(){$(this).siblings(".portal-notify-me-ref").fadeIn("fast")})})},_changeConfig=function(){function set(o){var reg=/\./g;if(isObj(o))for(var i in o)if(-1!==i.indexOf(".")){var str='["'+i.replace(reg,'"]["')+'"]',val=getValue(o[i]);eval("config"+str+"="+val)}else findProperty(config,i,o[i])}function findProperty(o,p,v){for(var i in o)isObj(o[i])?findProperty(o[i],p,v):i===p&&(o[p]=v)}function isObj(o){return"object"==typeof o&&"function"!=typeof o.splice}function getValue(v){switch(typeof v){case"string":return"'"+v+"'";case"number":return v;case"object":return"function"==typeof v.splice?"["+v+"]":"{"+v+"}"}}return{set:set}}(),init=function(config){config&&_changeConfig.set(config),_createUI(),_bindUIActions(),_getProductoData(),_getProductWithVar()};return{init:init,config:config}}();if($("#product-content").length&&skuSelector.init({sellerId:"1","elements.classes.skuContainer":".seletor-sku",quotationOnly:!1,"qtButton.moreLimit":200,"footerDiv.version":"1",totalPrice:!0,showNotifyMe:!0}),document.querySelector("#product-page .seletor-sku .skuCheck label")){let skuFirst=document.querySelector("#product-page .seletor-sku .skuCheck label");skuFirst.click()}